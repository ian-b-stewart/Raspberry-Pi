# =============================================================================
# Raspberry Pi Backup Configuration
# =============================================================================
#
# Copy this file to secrets/backup.env and fill in your values:
#   cp backup.env.example secrets/backup.env
#   chmod 600 secrets/backup.env
#
# SECURITY: Never commit secrets/backup.env to version control!
#
# =============================================================================

# -----------------------------------------------------------------------------
# LOCAL PATHS
# -----------------------------------------------------------------------------

# Path to the docker-homelab repository on this Raspberry Pi
DOCKER_HOMELAB_PATH="/opt/docker-homelab"

# Path to the secrets directory within docker-homelab (will be encrypted)
# This typically contains .env files with credentials for your stacks
HOMELAB_SECRETS_PATH="/opt/docker-homelab/secrets"

# Hostname identifier used in backup filenames (e.g., "gibson", "pi-prod")
LOCAL_HOSTNAME="raspberry-pi"

# -----------------------------------------------------------------------------
# REMOTE BACKUP SERVER
# -----------------------------------------------------------------------------

# SSH user on the backup server (create a dedicated user for backups)
BACKUP_REMOTE_USER="backup-user"

# Hostname or IP of your backup server
BACKUP_REMOTE_HOST="backup-server.local"

# Remote directory path where backups will be stored
BACKUP_REMOTE_PATH="/backups/raspberry-pi"

# SSH port (default: 22)
BACKUP_REMOTE_PORT="22"

# -----------------------------------------------------------------------------
# SSH AUTHENTICATION
# -----------------------------------------------------------------------------

# Path to the SSH private key for connecting to backup server
# Generated by setup.sh in the secrets directory
SSH_KEY_PATH="./secrets/id_backup_ed25519"

# Passphrase for the SSH private key
# The backup script uses ssh-agent to handle this securely
SSH_KEY_PASSPHRASE="your-ssh-key-passphrase-here"

# -----------------------------------------------------------------------------
# BACKUP ENCRYPTION
# -----------------------------------------------------------------------------

# Password used for GPG symmetric encryption of backup archives
# Generate a strong password: openssl rand -base64 32
BACKUP_ENCRYPTION_PASSWORD="your-encryption-password-here"

# Password version number (increment when rotating passwords)
BACKUP_PASSWORD_VERSION="1"

# Date when current password was set (YYYY-MM-DD format)
BACKUP_PASSWORD_CREATED="2026-01-19"

# -----------------------------------------------------------------------------
# HEALTHCHECKS.IO MONITORING
# -----------------------------------------------------------------------------

# Healthchecks.io ping URL for backup job monitoring
# Create a check at https://healthchecks.io and paste the ping URL
# Leave empty to disable monitoring
HEALTHCHECK_BACKUP_URL=""

# Healthchecks.io ping URL for password rotation reminder
# Create a separate check with 90-day period and 7-day grace
# Leave empty to disable rotation reminders
HEALTHCHECK_ROTATION_URL=""

# -----------------------------------------------------------------------------
# BACKUP RETENTION (Generational/GFS scheme)
# -----------------------------------------------------------------------------

# Number of daily backups to retain
BACKUP_RETENTION_DAILY="7"

# Number of weekly backups to retain (kept on Sundays)
BACKUP_RETENTION_WEEKLY="4"

# Number of monthly backups to retain (kept on 1st of month)
BACKUP_RETENTION_MONTHLY="3"

# -----------------------------------------------------------------------------
# DOCKER STACKS TO BACKUP
# -----------------------------------------------------------------------------

# Comma-separated list of stack names to backup (bind mounts and volumes)
# These should match directory names under ${DOCKER_HOMELAB_PATH}/stacks/
BACKUP_STACKS="smokeping,phpipam"

# -----------------------------------------------------------------------------
# DATABASE BACKUP CONFIGURATION
# -----------------------------------------------------------------------------

# phpIPAM MariaDB container name (as defined in docker-compose.yml)
PHPIPAM_DB_CONTAINER="phpipam-mariadb"

# phpIPAM database name
PHPIPAM_DB_NAME="phpipam"

# phpIPAM database user (should match MYSQL_USER in your stack's env file)
PHPIPAM_DB_USER="phpipam"

# -----------------------------------------------------------------------------
# OPTIONAL: ADDITIONAL PATHS TO BACKUP
# -----------------------------------------------------------------------------

# Additional directories to include in backup (space-separated absolute paths)
# Example: "/etc/docker /home/pi/.config"
ADDITIONAL_BACKUP_PATHS=""

# -----------------------------------------------------------------------------
# ADVANCED OPTIONS
# -----------------------------------------------------------------------------

# Temporary directory for staging backups before transfer
BACKUP_TEMP_DIR="/tmp/backup-staging"

# Enable verbose output (set to "true" for debugging)
BACKUP_VERBOSE="false"

# Rsync bandwidth limit in KB/s (0 = unlimited)
RSYNC_BANDWIDTH_LIMIT="0"
